<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Base</title>
    <script type="module">
        var fileNames = [];
        var hashedDigit = -1
        const contentDiv = document.body;
        async function fetchFileNames() {
            const response = await fetch(`/assets/detectionFiles.json`);
            fileNames = await response.json();
            console.log(fileNames)
            loadContentFromHash();
        }

        function loadContentFromHash() {
            const hash = window.location.hash;
            console.log(hash)

            if (hash) {
                // Example of mapping hash to different content
                if (hash === "") {
                    contentDiv.innerHTML = `# This is empty hash content the content`;
                } else if (/^\d+$/.test(hash.split('#/')[1])) {
                    hashedDigit = parseInt(hash.split('#/')[1]);
                    contentDiv.innerHTML = `# This is the content for ${hash.split('#/')[1]}
                                            Another set of Markdown content here...`;
                    fetchJSONFiles(fileNames[hashedDigit])

                } else {
                    contentDiv.innerHTML = `# Unknown Hash
                                            This hash is not mapped to any content.`;
                }
            } else {
                contentDiv.innerHTML = `# Welcome No hash provided. Displaying default content.`;
            }
        }

        window.addEventListener('hashchange', loadContentFromHash);
        async function fetchJSONFiles(fileName) {
            const response = await fetch(`/assets/detectionFiles/${fileName}`);
            const data = await response.json();
            console.log(data);
            var newParagraph = document.createElement("p");
            newParagraph.textContent = JSON.stringify(data);
            document.body.appendChild(newParagraph);
        }

        fetchFileNames();
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        #content {
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <script></script>
</body>

</html>